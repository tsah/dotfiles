#!/bin/bash

# Open work notes in nvim within tmux session
NOTES_FILE="$HOME/Documents/notes/tweezr.md"
SESSION_NAME="notes"

# Ensure notes directory exists
mkdir -p "$(dirname "$NOTES_FILE")"

# Check if tmux session exists
if tmux has-session -t "$SESSION_NAME" 2>/dev/null; then
    # Session exists, attach to it in a new terminal
    uwsm-app -- xdg-terminal-exec tmux attach-session -t "$SESSION_NAME"
else
    # Create new session with nvim editing the notes file
    uwsm-app -- xdg-terminal-exec tmux new-session -s "$SESSION_NAME" nvim "$NOTES_FILE"
fi
